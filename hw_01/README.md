# Лабораторная работа. Базовая настройка коммутатора

## Таблица адресации

|Устройство | Интерфейс | IP-адрес/префикс |
|-----------|-----------|-----------------:|
|S1         |VLAN 1     | 192.168.1.2 /24  |
|PC-A       |NIC        | 192.168.1.10 /24 |

### Задачи

    Часть 1. Проверка конфигурации коммутатора по умолчанию
    Часть 2. Создание сети и настройка основных параметров устройства
        • Настройка базовых параметров коммутатора.
        • Настройка IP-адреса для ПК.
    Часть 3. Проверка сетевых подключений
        • Отображение конфигурации устройства.
        • Тестирование сквозного соединения.
        • Тестирование возможности удаленного управления с помощью Telnet.

### Решение

Файл CPT с полностью настроенным оборудованием [тут](lab_01.docx)

#### Часть 1. Создание сети и проверка настроек коммутатора по умолчанию

##### Шаг 1. Создал сеть согласно топологии

Подсоединил консольный кабель, как показано в топологии. На данном этапе кабель Ethernet компьютера PC-A не подключал.
Установил консольное подключение к коммутатору с компьютера PC-A с помощью приложения Terminal.
Для первоначальной настройки коммутатора нужно использовать консольное подключение в связи с тем, что коммутатор не имеет никаких настроек (в том числе IP-адреса) и подключиться по нему удаленно, используя Telnet или SSH подключение невозможно.

##### Шаг 2. Проверка настройки коммутатора по умолчанию

a. Подключившись к коммутатору с использованием программы эмуляции терминала получил доступ к командной строке пользовательского режима EXEC в виде Switch>. Ввел команду **enable**, чтобы войти в привилегированный режим EXEC.
*Обратил внимание, что измененная в конфигурации строка отражает привилегированный режим EXEC*
Убедился, что на коммутаторе находится пустой файл конфигурации по умолчанию, с помощью команды **show running-config** привилегированного режима EXEC.  

b. Изучил текущий файл running configuration.

- На коммутаторе 2960 имеется **24 интерфейса FastEthernet**
- На коммутаторе 2960 имеется **2 интерфейса Gigabit Ethernet**
- Диапазон значений, отображаемых в vty-линиях: **0-4 и 5-15. Всего 16 линий.**

c. Попробовал изучить файл загрузочной конфигурации (startup configuration), который содержится в энергонезависимом ОЗУ (NVRAM). Получил надпись **«startup-config is not present»**. Данное сообщение появилось в связи с тем, что нами не выполнена настройка и, самое главное, сохранение текущей конфигурации.

d. Изучил характеристики SVI для VLAN 1.

- IP-адрес сети VLAN 1 не назначен, о чем свидетельствует надпись **«no ip address»**.
- SVI имеет следующий MAC-адрес: **00:60:47:8D:2E:AB**.
- Данный интерфейс не включен, о чем свидетельствует надпись **«shutdown»**.

e. Попробовал изучить IP-свойства интерфейса SVI сети VLAN 1.
    *Увидел, что **обработка IP отключена**. Полагаю, что это связано с тем, что адресация не задана, интерфейс отключен.*

f.Подсоединил кабель Ethernet компьютера PC-A к порту 6 на коммутаторе и изучил IP-свойства интерфейса SVI сети VLAN 1.
    *Ничего не изменилось. Полагаю, что по причине, указанной выше.*

g. Изучил сведения о версии ОС Cisco IOS на коммутаторе:

- Коммутатор работает под управлением ОС Cisco IOS версии **15.0(2)SE4**
- Файл образа системы называется **2960-lanbasek9-mz.150-2.SE4.bin**
- Базовый MAC-адрес, назначенный коммутатору **00:60:47:8D:2E:AB**

h. Изучил свойства по умолчанию интерфейса FastEthernet, который используется компьютером PC-A используя команду **show interface f0/6:**

- Интерфейс включен.
- Что нужно сделать, чтобы включить интерфейс: ничего – он включен. Подключили кабель и всё «Ок»
- Какой MAC-адрес у интерфейса: **00:02:17:04:73:06**
- Какие настройки скорости и дуплекса заданы в интерфейсе: **Full-duplex, 100Mb/s**

i. Изучил параметры сети VLAN по умолчанию на коммутаторе.

- Какое имя присвоено сети VLAN 1 по умолчанию: **default**
- Какие порты расположены в сети VLAN 1: **все порты коммутатора.**
- Активна ли сеть VLAN 1: **активна**
- К какому типу сетей VLAN принадлежит VLAN по умолчанию: **Native VLAN**

j. Изучил флеш-память.

- Выполнил команду **show flash**, чтобы изучить содержимое флеш-каталога.
- Какое имя присвоено образу Cisco IOS: **2960-lanbasek9-mz.150-2.SE4**

#### Часть 2. Настройка базовых параметров сетевых устройств

##### Шаг 1. Настройка базовые параметры коммутатора

a. В режиме глобальной конфигурации задал следующие базовые параметры конфигурации:

- Отключение трансляции системных сообщений в консоли: **logging synchronous**
- Запрет трансляции имён DNS: **no ip domain-lookup**
- Указание «уникального» имени для коммутатора: **hostname S1**
- Включение шифрования паролей: **service password-encryption**
- Установка пароля «class» на вход в привелигированный режим: **enable secret class**
- Настройка баннерного сообщения: **banner motd #
 Unauthorized access is strictly prohibited. #**

b. Назначил IP-адрес интерфейсу SVI на коммутаторе.

    S1(config)# interface vlan 1
    S1(config-if)# ip address 192.168.1.2 255.255.255.0
    S1(config-if)# no shutdown

c. Доступ через порт консоли ограничил с помощью пароля. Используя **cisco** в качестве пароля для входа в консоль в этом задании. И включил доступ по паролю командой **login**

    S1(config)# **line con 0**
    S1(config-line)# **password cisco**
    S1(config-line)# **login**

d. Настроил каналы виртуального соединения для удаленного управления (vty), чтобы коммутатор разрешил доступ через Telnet

    S1(config) # **line vty 0 4**
    S1(config-line)# **password cisco**
    S1(config-line)# **login**

Для чего нужна команда login: **для включения доступа к каналам VTY**

##### Шаг 2. Настройка IP-адреса на компьютере PC-A

Назначил компьютеру IP-адрес и маску подсети в соответствии с таблицей адресации: 192.168.1.10, маска 255.255.255.0

#### Часть 3. Проверка сетевых подключений

##### Шаг 1. Отобразите конфигурацию коммутатора

Использовал консольное подключение на компьютере PC-A для отображения и проверки конфигурации коммутатора. Ввел команду show run для отображения действующей конфигурации:
a. конфигурация приведена ниже.

    S1# show run
    Building configuration...
    Current configuration : 1296 bytes
    !
    version 15.0
    no service timestamps log datetime msec
    no service timestamps debug datetime msec
    service password-encryption
    !
    hostname S1
    !
    enable secret 5 $1$mERr$9cTjUIEqNGurQiFU.ZeCi1
    !
    !
    !
    no ip domain-lookup
    !
    !
    !
    spanning-tree mode pvst
    spanning-tree extend system-id
    !
    interface FastEthernet0/1
    …
    interface GigabitEthernet0/1
    !
    interface GigabitEthernet0/2
    !
    interface Vlan1
    ip address 192.168.1.2 255.255.255.0
    !
    banner motd ^C
    Unauthorized access is strictly prohibited. ^C
    !
    !
    !
    line con 0
    password 7 0822455D0A16
    logging synchronous
    login
    !
    line vty 0 4
    password 7 0822455D0A16
    login
    line vty 5 15
    login
    !
    !
    !
    !
    end

b. Проверил параметры VLAN 1.
`S1# show interface vlan 1`

- Какова полоса пропускания этого интерфейса: *напишу, когда расскажут на лекции*
- В каком состоянии находится VLAN 1: **Vlan1 is up**
- В каком состоянии находится канальный протокол: **line protocol is up**

##### Шаг 2. Протестировал сквозное соединение, отправив эхо-запрос

a. В командной строке компьютера PC-A с помощью утилиты ping проверил связь сначала с адресом PC-A.
`C:\> ping 192.168.1.10`
b. Из командной строки компьютера PC-A отправил эхо-запрос на адрес интерфейса SVI коммутатора S1.
`C:\> ping 192.168.1.2`

Поскольку компьютеру PC-A нужно преобразовать МАС-адрес коммутатора S1 с помощью ARP, время ожидания передачи первого пакета истекло. Остальные пакеты прошли без проблем.

##### Шаг 3. Проверил удаленное управление коммутатором S1

Использую удаленный доступ к устройству с помощью **Telnet**
a. Используя приложение **Telnet/SSH client** на PC указал адрес коммутатора 192.168.1.2 и подключился к нему.

b. После ввода пароля оказался в командной строке пользовательского режима. Для перехода в исполнительский режим EXEC ввел команду enable и использовал ранее заданный секретный пароль

c. Сохранил конфигурацию командой **copy running-config startup-config**.

##### Вопросы для повторения

1. Зачем необходимо настраивать пароль VTY для коммутатора: **для ограничения доступа к управлению коммутатором**
2. Что нужно сделать, чтобы пароли не отправлялись в незашифрованном виде: включить шифрование паролей командой **service password-encryption**

#### Приложение А. Инициализация и перезагрузка коммутатора

a. Подключился к коммутатору с помощью консоли и вошел в привилегированный режим EXEC.

b. Воспользовался командой **show flash**, чтобы определить, были ли созданы сети VLAN на коммутаторе.

    S1# show flash
    Directory of flash:/
        1  -rw-     4670455          no date  2960-lanbasek9-mz.150-2.SE4.bin
        2  -rw-        1286          no date  config.text

    64016384 bytes total (59344643 bytes free)

c. Во флеш-памяти файл **vlan.dat** не обнаружен, так как сети VLAN мною не создавались.

d. Ввел команду **erase startup-config**, чтобы удалить файл загрузочной конфигурации из NVRAM.

    S1#erase startup-config
    Erasing the nvram filesystem will remove all configuration files! Continue? [confirm]
    [OK]
    Erase of nvram: complete
    %SYS-7-NV_BLOCK_INIT: Initialized the geometry of nvram
    S1#

e. Перезагрузил коммутатор, чтобы удалить устаревшую информацию о конфигурации из памяти.

    S1# reload
    Proceed with reload? [confirm]

f. После перезагрузки коммутатора получил чистый, не настроенный коммутатор. Так как при удалении конфигурации ethernet кабель от порта не отключал, то после загрузки в консоли получил сообщение:

    Press RETURN to get started!
    %LINK-5-CHANGED: Interface FastEthernet0/6, changed state to up
    %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/6, changed state to up
    Switch>
